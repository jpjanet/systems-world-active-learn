

\thispagestyle{empty}
\begin{tikzpicture}[x = 1cm, y=1cm]
%%% parameters
\def\xfr{23}
\def\xmr{17}
\def\xfl{3}
\def\xml{9}
\def\ytop{16}
\def\ysep{3}
\def\fopac{0.75} % fill opacity
\def\shopac{0.1} % shade opacity
\def\xbound{26}
\def\ybound{20}
\def\ymin{-2}
\def\xmin{0}
\def\ymin{-1}
\def\shadea{purple!50!blue}
\def\shadeb{green!25!yellow}
\def\shadec{red!50!yellow}
\def\shaded{green!75!red}
\def\fixedboxcol{gray!20!}
\def\answerboxcola{blue!50!}
\def\answerboxcolb{darkgreen!50!}
\def\answerboxcolc{purple!50!}
\def\answerboxcold{yellow!50!}
%%% other defs
\def\xcl{{(0.5*\xml+ 0.5*\xfl)}}
\def\xcr{{(0.5*\xmr+ 0.5*\xfr)}}
%% bounding box
\draw[ultra thick, use as bounding box](\xmin,\ymin) rectangle (\xbound,\ybound);
%% setting the shaded boxes
\node[rectangle,rounded corners,fill=\shadea,fill opacity = \shopac, minimum width = 11.25cm, minimum height = 3.5cm] (centershade_bot) at ({0.5*(\xmin + \xbound)},{(-3.5)*\ysep+\ytop}){};   
\node[rectangle,rounded corners,fill=\shaded,fill opacity = \shopac, minimum width = 11.25cm, minimum height = 3.5cm] (centershade_top) at ({0.5*(\xmin + \xbound)},{(-1)*\ysep+\ytop}){};   
 \node[rectangle,rounded corners,fill=\shadec,fill opacity = \shopac, minimum width = 3.25cm, minimum height = 6cm] (leftshade) at (\xfl,{(-3.5)*\ysep+\ytop}){}; 
%%% draw skeleton
\foreach \namey / \y in {2,1}
        \foreach \namex / \x in {\xfr,\xmr,\xml,\xfl}
        	\node[statementbox] (S-\namex-\namey) at (\x,{(-\y+1)*\ysep+\ytop}){};
\foreach \namey / \y in {2,1}
        \foreach \namex / \x in {\xcl,\xcr}
       	\node[relationbox] (R-\namex-\namey) at (\x,{(-\y+1)*\ysep+\ytop}){};
%%% add in the nodes that are 'off the grid manually'
\foreach \namex / \x in {\xml,\xfl}
    	\node[statementbox] (S-\namex-3) at (\x,{(-2)*\ysep+\ytop}){};
\foreach \namex / \x in {\xcl}
       	\node[relationbox] (R-\namex-3) at (\x,{(-2)*\ysep+\ytop}){};     	
\node[relationbox,rotate=-10] (R-\xcr-3b) at (\xcr,{(-2.50)*\ysep+\ytop}){};
\node[relationbox,rotate=10] (R-\xcr-3a) at (\xcr,{(-2)*\ysep+\ytop}){};
\node[statementbox] (S-\xmr-3) at (\xmr,{(-2.25)*\ysep+\ytop}){};
\node[statementbox] (S-\xfr-3a) at (\xfr,{(-1.85)*\ysep+\ytop}){}; 
\node[statementbox] (S-\xfr-3b) at (\xfr,{(-2.65)*\ysep+\ytop}){};   	
\node[ellipse,rounded corners,fill=\shadeb,fill opacity = \shopac, minimum width = 11cm, minimum height = 6cm] (rightshade) at (\xcr,{(-3.5)*\ysep+\ytop - 1.5}){};          	            
\node[relationbox,rotate=60] (R-\xcr-4a) at ({\xfr-0.4},{(-3.5)*\ysep+\ytop - 2.5}){};
\node[relationbox,rotate=-60] (R-\xcr-4b) at ({\xmr+0.4},{(-3.5)*\ysep+\ytop - 2.5}){};
\node[relationbox] (R-\xcr-4c) at (\xcr,{(-3.5)*\ysep+\ytop }){};

%% watch out for naming of these nodes!
\node[statementbox] (S-\xfr-4a) at (\xmr,{(-3.5)*\ysep+\ytop}){};
\node[statementbox] (S-\xfr-4b) at (\xfr,{(-3.5)*\ysep+\ytop}){}; 
\node[statementbox] (S-\xfr-4c) at (\xcr,{(-3.5)*\ysep+\ytop - 3.5}){}; 

 %% row 4 left
\node[relationbox] (R-\xcl-4a) at (\xfl,{(-3.5)*\ysep+\ytop}){};
\node[relationbox] (R-\xcl-4b) at (\xcl,{(-3.5)*\ysep+\ytop}){};
\node[statementbox] (S-\xfl-4a) at (\xfl,{(-3)*\ysep+\ytop}){}; 
\node[statementbox] (S-\xfl-4b) at (\xfl,{(-4)*\ysep+\ytop}){}; 
\node[statementbox] (S-\xml-4) at (\xml,{(-3.5)*\ysep+\ytop}){}; 

%%% central items
 \node[relationbox] (center) at ({0.5*(\xmin + \xbound)},{(-3.5)*\ysep+\ytop}){};
 \node[relationbox, rotate=-90] (F-GLOB) at ({0.5*(\xmin + \xbound)},{(-4.15)*\ysep+\ytop}){}; 
  \node[relationbox] (center_top) at ({0.5*(\xmin + \xbound)},{(-1)*\ysep+\ytop}){};
 \node[relationbox, rotate=90] (F-GLOB_TOP) at ({0.5*(\xmin + \xbound)},{(-0.375)*\ysep+\ytop}){}; 
 \node[statementbox] (S-GLOB) at ({0.5*(\xmin + \xbound)},{(-5)*\ysep+\ytop}){};
 \node[statementbox] (S-GLOB_TOP) at ({0.5*(\xmin + \xbound)},{(0.5)*\ysep+\ytop}){};
 
% 
 
% 
% 
%%%% statements
%%% row one left
\node[statement,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FS-\xfl-1) at (S-\xfl-1){$\xstar$ is a \textbf{local min} of $f\left(x\right)$};
\node[relation,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FR-\xcl-1) at (R-\xcl-1){\huge$\implies$};
%
%
%%% row two left
\node[relation,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FR-\xcl-2) at (R-\xcl-2){\huge $\impliedby$};
\node[statement,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FS-\xml-2) at (S-\xml-2){$\xstar$ is a \textbf{local max} of $f\left(x\right)$};
%
%%% row three left
\node[statement,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FS-\xfl-3) at (S-\xfl-3){$\Hess{\xstar}$ is \textbf{p.s.d.}};
\node[statement,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FS-\xml-3) at (S-\xml-3){$\xstar$ is a \textbf{local min} of $f\left(x\right)$};



%% row four left
\node[relation,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FR-\xcl-4a) at (R-\xcl-4a){\huge $+$};
\node[relation,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FR-\xcl-4b) at (R-\xcl-4b){\huge $\implies$};
\node[statement,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FS-\xfl-4a) at (S-\xfl-4a){$\nabla f\left(\xstar\right)=0$};
\node[statement,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FS-\xml-4) at (S-\xml-4){$\xstar$ is a \textbf{local min} of $f\left(x\right)$};


%% row one right
\node[statement,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FS-\xfr-1) at (S-\xfr-1){$f\left(x\right) = 9x_1^2 -4x_1x_2 + 6x{_2}{^2}$};
\node[relation,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FR-\xcr-1) at (R-\xcr-1){\huge$\impliedby$};

%% row two right
\node[relation,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FR-\xcr-2) at (R-\xcr-2){\huge$\iff$};
\node[statement,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FS-\xmr-2) at (S-\xmr-2){$f\left(x\right)$ is concave $\forall x \in \mathbb{R}^{n}$};

%% row three right
\node[relation,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1,rotate=-10] (FR-\xcr-3b) at (R-\xcr-3b){\huge$\implies$};
\node[statement,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FS-\xfr-3a) at (S-\xfr-3a){$f\left(x\right)$ is convex  $\forall x \in \mathbb{R}^{n}$};

%
%
%
%%% row four right
\node[relation,fill=\fixedboxcol,fill opacity = \fopac,rotate=60,text opacity = 1] (FR-\xcr-4a) at (R-\xcr-4a){\huge $\iff$};
\node[relationbox,fill=\fixedboxcol,fill opacity = \fopac,rotate=-60,text opacity = 1] (FR-\xcr-4b) at (R-\xcr-4b){\huge $\iff$};
\node[statement,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FS-\xfr-4c) at (S-\xfr-4c){$\Hess{x}$ is \textbf{p.s.d.}  $\forall x \in \mathbb{R}^{n}$};
%
%
%%% global part
\node[relationbox,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FR-center) at (center){\huge $+$};
\node[relationbox,fill=\fixedboxcol,fill opacity = \fopac,text opacity = 1] (FR-center_top) at (center_top){\huge $+$};
\path[draw, ultra thick, gray] (S-\xml-4) -- (FR-center) {}; 
\path[draw, ultra thick, gray] (S-\xfr-4a) -- (FR-center) {}; 
\path[draw, ultra thick, gray] (S-\xml-2) -- (FR-center_top) {}; 
\path[draw, ultra thick, gray] (S-\xmr-2) -- (FR-center_top) {}; 


%% answers (comment out to render blank)
%% will need a seperate document that assigns these seperately
\node[statement,fill=\answerboxcola,fill opacity = \fopac,text opacity = 1] (FS-\xml-1) at (S-\xml-1){$\nabla f\left(\xstar\right)=0$};
\node[relation,fill=\answerboxcolc,fill opacity = \fopac,text opacity = 1] (FR-\xcl-3) at (R-\xcl-3){\huge $\impliedby$};
\node[statement,fill=\answerboxcold,fill opacity = \fopac,text opacity = 1] (FS-\xfl-2) at (S-\xfl-2){\small  $\lambda_i  \leq 0$, \\ $\forall\lambda_i \in \text{eig}\left(\Hess{\xstar}\right) $ };
\node[statement,fill=\answerboxcola,fill opacity = \fopac,text opacity = 1] (FS-\xfl-4b) at (S-\xfl-4b){$\Hess{\xstar}$ is \textbf{p.d.}};
\node[statement,fill=\answerboxcolb,fill opacity = \fopac,text opacity = 1] (FS-\xmr-1) at (S-\xmr-1){$f\left(x\right)$ is convex $\forall x \in \mathbb{R}^{n}$};
\node[statement,fill=\answerboxcold,fill opacity = \fopac,text opacity = 1] (FS-\xfr-2) at (S-\xfr-2){$\Hess{x}$ is \textbf{n.s.d.} $\forall x \in \mathbb{R}^{n}$};
\node[relation,fill=\answerboxcolc,fill opacity = \fopac,text opacity = 1,rotate=10] (FR-\xcr-3a) at (R-\xcr-3a){\huge$\implies$};
\node[statement,fill=\answerboxcola,fill opacity = \fopac,text opacity = 1] (FS-\xmr-3) at (S-\xmr-3){\small $\lambda_i   = 0$, \\ $\forall\lambda_i \in \text{eig}\left(\Hess{x}\right) $, $\forall x \in \mathbb{R}^{n}$};
\node[statement,fill=\answerboxcolb,fill opacity = \fopac,text opacity = 1] (FS-\xfr-3b) at (S-\xfr-3b){$f\left(x\right)$ is concave  $\forall x \in \mathbb{R}^{n}$};
\node[statement,fill=\answerboxcold,fill opacity = \fopac,text opacity = 1] (FS-\xfr-4b) at (S-\xfr-4b){\small $\lambda_i   \geq 0$, \\ $\forall\lambda_i \in \text{eig}\left(\Hess{x}\right)$, $\forall x \in \mathbb{R}^{n}$};
\node[statement,fill=\answerboxcolb,fill opacity = \fopac,text opacity = 1] (FS-\xfr-4a) at (S-\xfr-4a){$f\left(x\right)$ is convex $\forall x \in \mathbb{R}^{n}$};
\node[relationbox,fill=\answerboxcold,fill opacity = \fopac,text opacity = 1,rotate=90] (FR-GLOB) at (F-GLOB){\huge $\impliedby$};
\node[relationbox,fill=\answerboxcola,fill opacity = \fopac,text opacity = 1] (FR-\xcr-4c) at (R-\xcr-4c){\huge $\iff$};
\node[relationbox,fill=\answerboxcolc,fill opacity = \fopac,text opacity = 1,rotate=90] (FR-GLOB_TOP) at (F-GLOB_TOP){\huge $\implies$};
\node[statement,fill=\answerboxcolb,fill opacity = \fopac,text opacity = 1] (FS-GLOB) at (S-GLOB){$\xstar$ is \textbf{global min} of $f\left(x\right)$};
\node[statement,fill=\answerboxcolc,fill opacity = \fopac,text opacity = 1] (FS-GLOB_TOP) at (S-GLOB_TOP){$\xstar$ is \textbf{global max} of $f\left(x\right)$};

\end{tikzpicture}
\thispagestyle{empty}
%\end{center}
